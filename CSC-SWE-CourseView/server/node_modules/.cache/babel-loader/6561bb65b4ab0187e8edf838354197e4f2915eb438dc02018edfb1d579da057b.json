{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\islay\\\\Documents\\\\Local_Repo\\\\CSC4350_SWE\\\\CSC-SWE-CourseView\\\\client\\\\src\\\\pages\\\\courses-details\\\\edit-comment.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\nimport './courses-details.css';\nimport Cookies from 'js-cookie';\nimport ClientAPI from \"../../api/clientAPI\";\nimport MySecurity from \"../../api/mySecurity\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const EditComment = () => {\n  _s();\n  const {\n    reviewID\n  } = useParams(); // Get the courseId from URL params\n  const navigate = useNavigate();\n  const [inputValues, setInputValues] = useState({});\n  const {\n    search\n  } = useLocation();\n  const query = new URLSearchParams(search);\n  const courseId = query.get('courseId');\n  const userId = query.get('userId');\n  useEffect(() => {\n    if (Cookies.get(\"userID\") !== userId) navigate(\"/courses\");\n  }, []);\n  const handleCancelEdit = event => {\n    event.preventDefault();\n    navigate(`/courses-details/${courseId}`);\n  };\n  const handleInputChange = event => {\n    const {\n      value\n    } = event.target;\n    setInputValues(prevValues => ({\n      ...prevValues,\n      comment: value\n    }));\n  };\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const data = {\n          reviewID: reviewID\n        };\n        // get information\n        const respond = await ClientAPI.post(\"getCommentsDetail\", data);\n        let reviewData = MySecurity.decryptedData(respond.data);\n        setInputValues({\n          reviewID: reviewID,\n          comment: reviewData.comment\n        });\n      } catch (err) {\n        alert(\"Can not Fetch\", err);\n      }\n    }\n    fetchData();\n  }, []);\n  const handleEditComment = async event => {\n    event.preventDefault();\n    // Submit change\n    try {\n      let data = {\n        ...inputValues\n      };\n      const respond = await ClientAPI.post(\"updateComments\", data);\n      if (respond.data !== null && respond.data !== undefined) {\n        //alert(\"Edited: \")\n        navigate(`/courses-details/${courseId}`);\n      }\n    } catch (err) {\n      alert(\"Can not Edit\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"updateComment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sub-header-course-detail\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/courses-details/${courseId}`,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Edit Your Review\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit-comment-section\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEditComment,\n        encType: \"multipart/form-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Edit Your Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Write your comment here...\",\n          value: inputValues.comment,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          name: \"cancelEditProduct\",\n          onClick: handleCancelEdit,\n          style: {\n            marginRight: '10px'\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          name: \"editProduct\",\n          children: \"Edit Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n_s(EditComment, \"g13w+hUc4TU+rKKxPwR++kDMfBQ=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = EditComment;\nvar _c;\n$RefreshReg$(_c, \"EditComment\");","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","useLocation","Cookies","ClientAPI","MySecurity","jsxDEV","_jsxDEV","EditComment","_s","reviewID","navigate","inputValues","setInputValues","search","query","URLSearchParams","courseId","get","userId","handleCancelEdit","event","preventDefault","handleInputChange","value","target","prevValues","comment","fetchData","data","respond","post","reviewData","decryptedData","err","alert","handleEditComment","undefined","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","encType","placeholder","onChange","type","name","onClick","style","marginRight","_c","$RefreshReg$"],"sources":["C:/Users/islay/Documents/Local_Repo/CSC4350_SWE/CSC-SWE-CourseView/client/src/pages/courses-details/edit-comment.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\nimport './courses-details.css';\nimport Cookies from 'js-cookie';\nimport ClientAPI from \"../../api/clientAPI\";\nimport MySecurity from \"../../api/mySecurity\";\n\n\nexport const EditComment = () => {\n    const { reviewID } = useParams(); // Get the courseId from URL params\n    const navigate = useNavigate();\n    const [inputValues, setInputValues] = useState({});\n    const { search } = useLocation();\n    const query = new URLSearchParams(search);\n\n    const courseId = query.get('courseId');\n    const userId = query.get('userId');\n\n    useEffect(() => {\n        if (Cookies.get(\"userID\") !== userId)\n            navigate(\"/courses\");\n    }, []);\n\n    const handleCancelEdit = (event) => {\n        event.preventDefault();\n        navigate(`/courses-details/${courseId}`);\n    };\n\n    const handleInputChange = (event) => {\n        const { value } = event.target;\n        setInputValues((prevValues) => ({\n            ...prevValues,\n            comment: value,\n        }));\n    };\n\n    useEffect(() => {\n        async function fetchData() {\n            try {\n                const data = {\n                    reviewID: reviewID,\n                };\n                // get information\n                const respond = await ClientAPI.post(\"getCommentsDetail\", data);\n                let reviewData = MySecurity.decryptedData(respond.data);\n                setInputValues({\n                    reviewID: reviewID,\n                    comment: reviewData.comment,\n                });\n            }\n            catch (err) {\n                alert(\"Can not Fetch\", err)\n            }\n        }\n        fetchData();\n    }, []);\n\n    const handleEditComment = async (event) => {\n        event.preventDefault();\n        // Submit change\n        try {\n            let data = {\n                ...inputValues,\n            }\n            const respond = await ClientAPI.post(\"updateComments\", data);\n            if (respond.data !== null && respond.data !== undefined) {\n                //alert(\"Edited: \")\n                navigate(`/courses-details/${courseId}`);\n            }\n        }\n        catch (err) {\n            alert(\"Can not Edit\", err)\n        }\n    };\n\n    return (\n        <div className='updateComment'>\n            <div className='sub-header-course-detail'>\n                <Link to={`/courses-details/${courseId}`}>\n                    <i className=\"fa-solid fa-arrow-left\"></i>\n                </Link>\n                <h5>Edit Your Review</h5>\n            </div>\n            <div className=\"edit-comment-section\">\n                <form onSubmit={handleEditComment} encType=\"multipart/form-data\">\n                    <h5>Edit Your Review</h5>\n                    <br />\n                    <textarea\n                        placeholder=\"Write your comment here...\"\n                        value={inputValues.comment}\n                        onChange={handleInputChange}\n                    />\n                    <button type=\"button\" name=\"cancelEditProduct\" onClick={handleCancelEdit} style={{ marginRight: '10px' }} >Cancel</button>\n                    <button type=\"submit\" name=\"editProduct\">Edit Item</button>\n                </form>\n            </div>\n        </div>\n    );\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,SAAS,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC5E,OAAO,uBAAuB;AAC9B,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,UAAU,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG9C,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM;IAAEC;EAAS,CAAC,GAAGV,SAAS,CAAC,CAAC,CAAC,CAAC;EAClC,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM;IAAEiB;EAAO,CAAC,GAAGZ,WAAW,CAAC,CAAC;EAChC,MAAMa,KAAK,GAAG,IAAIC,eAAe,CAACF,MAAM,CAAC;EAEzC,MAAMG,QAAQ,GAAGF,KAAK,CAACG,GAAG,CAAC,UAAU,CAAC;EACtC,MAAMC,MAAM,GAAGJ,KAAK,CAACG,GAAG,CAAC,QAAQ,CAAC;EAElCpB,SAAS,CAAC,MAAM;IACZ,IAAIK,OAAO,CAACe,GAAG,CAAC,QAAQ,CAAC,KAAKC,MAAM,EAChCR,QAAQ,CAAC,UAAU,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMS,gBAAgB,GAAIC,KAAK,IAAK;IAChCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtBX,QAAQ,CAAE,oBAAmBM,QAAS,EAAC,CAAC;EAC5C,CAAC;EAED,MAAMM,iBAAiB,GAAIF,KAAK,IAAK;IACjC,MAAM;MAAEG;IAAM,CAAC,GAAGH,KAAK,CAACI,MAAM;IAC9BZ,cAAc,CAAEa,UAAU,KAAM;MAC5B,GAAGA,UAAU;MACbC,OAAO,EAAEH;IACb,CAAC,CAAC,CAAC;EACP,CAAC;EAED1B,SAAS,CAAC,MAAM;IACZ,eAAe8B,SAASA,CAAA,EAAG;MACvB,IAAI;QACA,MAAMC,IAAI,GAAG;UACTnB,QAAQ,EAAEA;QACd,CAAC;QACD;QACA,MAAMoB,OAAO,GAAG,MAAM1B,SAAS,CAAC2B,IAAI,CAAC,mBAAmB,EAAEF,IAAI,CAAC;QAC/D,IAAIG,UAAU,GAAG3B,UAAU,CAAC4B,aAAa,CAACH,OAAO,CAACD,IAAI,CAAC;QACvDhB,cAAc,CAAC;UACXH,QAAQ,EAAEA,QAAQ;UAClBiB,OAAO,EAAEK,UAAU,CAACL;QACxB,CAAC,CAAC;MACN,CAAC,CACD,OAAOO,GAAG,EAAE;QACRC,KAAK,CAAC,eAAe,EAAED,GAAG,CAAC;MAC/B;IACJ;IACAN,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,iBAAiB,GAAG,MAAOf,KAAK,IAAK;IACvCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB;IACA,IAAI;MACA,IAAIO,IAAI,GAAG;QACP,GAAGjB;MACP,CAAC;MACD,MAAMkB,OAAO,GAAG,MAAM1B,SAAS,CAAC2B,IAAI,CAAC,gBAAgB,EAAEF,IAAI,CAAC;MAC5D,IAAIC,OAAO,CAACD,IAAI,KAAK,IAAI,IAAIC,OAAO,CAACD,IAAI,KAAKQ,SAAS,EAAE;QACrD;QACA1B,QAAQ,CAAE,oBAAmBM,QAAS,EAAC,CAAC;MAC5C;IACJ,CAAC,CACD,OAAOiB,GAAG,EAAE;MACRC,KAAK,CAAC,cAAc,EAAED,GAAG,CAAC;IAC9B;EACJ,CAAC;EAED,oBACI3B,OAAA;IAAK+B,SAAS,EAAC,eAAe;IAAAC,QAAA,gBAC1BhC,OAAA;MAAK+B,SAAS,EAAC,0BAA0B;MAAAC,QAAA,gBACrChC,OAAA,CAACR,IAAI;QAACyC,EAAE,EAAG,oBAAmBvB,QAAS,EAAE;QAAAsB,QAAA,eACrChC,OAAA;UAAG+B,SAAS,EAAC;QAAwB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC,eACPrC,OAAA;QAAAgC,QAAA,EAAI;MAAgB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CAAC,eACNrC,OAAA;MAAK+B,SAAS,EAAC,sBAAsB;MAAAC,QAAA,eACjChC,OAAA;QAAMsC,QAAQ,EAAET,iBAAkB;QAACU,OAAO,EAAC,qBAAqB;QAAAP,QAAA,gBAC5DhC,OAAA;UAAAgC,QAAA,EAAI;QAAgB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzBrC,OAAA;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACNrC,OAAA;UACIwC,WAAW,EAAC,4BAA4B;UACxCvB,KAAK,EAAEZ,WAAW,CAACe,OAAQ;UAC3BqB,QAAQ,EAAEzB;QAAkB;UAAAkB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC,eACFrC,OAAA;UAAQ0C,IAAI,EAAC,QAAQ;UAACC,IAAI,EAAC,mBAAmB;UAACC,OAAO,EAAE/B,gBAAiB;UAACgC,KAAK,EAAE;YAAEC,WAAW,EAAE;UAAO,CAAE;UAAAd,QAAA,EAAE;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1HrC,OAAA;UAAQ0C,IAAI,EAAC,QAAQ;UAACC,IAAI,EAAC,aAAa;UAAAX,QAAA,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACnC,EAAA,CA1FWD,WAAW;EAAA,QACCR,SAAS,EACbC,WAAW,EAETC,WAAW;AAAA;AAAAoD,EAAA,GAJrB9C,WAAW;AAAA,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}